<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script><link href="https://unpkg.com/material-components-web@6.0.0/dist/material-components-web.css"rel="stylesheet"><script src="https://unpkg.com/material-components-web@6.0.0/dist/material-components-web.min.js"></script><script src="https://unpkg.com/@google/markerclustererplus@^4.0.1/dist/markerclustererplus.min.js"></script><link rel="stylesheet"href="https://fonts.googleapis.com/icon?family=Material+Icons"><style type="text/css">body,html{height:100%;margin:0;padding:0}#container{height:100%;display:flex}#sidebar{flex-basis:5rem;flex-grow:1;padding:1rem;max-width:30rem;height:100%;box-sizing:border-box;overflow:auto}#map{flex-basis:0;flex-grow:4;height:100%}:root{--mdc-theme-primary:#1a73e8;--mdc-theme-secondary:#rgb(225, 245, 254);--mdc-theme-on-primary:#fff;--mdc-theme-on-secondary:rgb(1, 87, 155)}.mdc-text-field--focused:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-theme-primary)}#sidebar{flex-basis:5rem;flex-direction:column}#search,.mdc-card{margin-bottom:1rem}#search{display:flex;align-items:center}#search .mdc-icon-button,#search .mdc-text-field{margin:0 .1rem 0 0}#search .mdc-icon-button{color:var(--mdc-theme-primary)}#search .mdc-text-field{flex-grow:1}#cards{height:calc(100% - 56px);overflow:scroll}#card-body,#card-header{padding:0 1rem}</style><script>(()=>{"use strict";var a={d:(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},e={};let s,n,t,o,r,d;a.r(e),a.d(e,{initMap:()=>function(){d=new google.maps.DistanceMatrixService,n=google.maps.MapTypeId.ROADMAP,t=google.maps.MapTypeId.HYBRID,s=new google.maps.Map(document.getElementById("map"),{center:{lat:39.79,lng:-104.98},mapTypeId:n,zoom:10}),new mdc.textField.MDCTextField(document.querySelector(".mdc-text-field")),r=document.getElementById("search-input"),o=new google.maps.places.Autocomplete(r,{}),o.addListener("place_changed",i),o.bindTo("bounds",s),fetch("https://carto.nationalmap.gov/arcgis/rest/services/structures/MapServer/23/query?where=STATE%3D%27CO%27&returnGeometry=true&outSR=4326&f=pjson").then(e=>e.json()).then(e=>{const t=e.features,o=[];t.forEach(({attributes:{NAME:e},geometry:{x:t,y:n}})=>{c.push({name:e,location:{lat:n,lng:t},address:""});const a=new google.maps.Marker({position:{lat:n,lng:t}});a.addListener("click",()=>{m(new google.maps.LatLng({lat:n,lng:t})),g(new google.maps.LatLng({lat:n,lng:t}))}),o.push(a)}),new MarkerClusterer(s,o,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"}),window.addEventListener("load",()=>{(void 0).done()}),m(s.getCenter()),s.setZoom(13),s.setMapTypeId(n)}),document.getElementById("near-me").addEventListener("click",()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(({coords:{latitude:e,longitude:t}})=>{m(new google.maps.LatLng({lat:e,lng:t})),s.setZoom(10),s.setMapTypeId(n)})}),document.getElementById("refresh").addEventListener("click",()=>{m(s.getCenter())})}});let l=!1;const c=[];function i(){r.disabled=!0,m(o.getPlace().geometry.location),s.setZoom(10),s.setMapTypeId(n)}function m(n){n&&(l?alert("Update in progress, please try again."):(r.disabled=!0,l=!0,s.setCenter(n),c.forEach(e=>{delete e.travelDistance,delete e.travelDistanceText,delete e.travelDuration,delete e.travelDurationText}),c.sort((e,t)=>google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.location),n)-google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t.location),n)),function(){const e=[n];return new Promise((n,a)=>{d.getDistanceMatrix({origins:e,destinations:c.slice(0,25).map(e=>e.location),travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL},(e,t)=>{t===google.maps.DistanceMatrixStatus.OK&&e?n(e):a(t)})})}().then(t=>{for(let e=0;e<t.rows[0].elements.length;e++)c[e].address=t.destinationAddresses[e],c[e].travelDistance=t.rows[0].elements[e].distance.value,c[e].travelDistanceText=t.rows[0].elements[e].distance.text,c[e].travelDuration=t.rows[0].elements[e].duration.value,c[e].travelDurationText=t.rows[0].elements[e].duration.text}).finally(()=>{!function(e){const d=document.getElementById("cards");d.innerHTML="",e.slice(0,25).forEach(({name:e,location:t,address:n,travelDistanceText:a,travelDurationText:o})=>{const s=document.createElement("div");s.classList.add("mdc-card","mdc-card--outlined"),s.innerHTML=`\n<div class="mdc-card__primary-action">\n  <div id="card-header">\n    <h2 class="mdc-typography--headline6">${e}</h2>\n  </div>\n</div>\n<div id="card-body">\n  </div>\n<div class="mdc-card__actions">\n  <a class="mdc-button mdc-card__action mdc-card__action--button"\n    target="_blank" href="https://maps.google.com?q=${n||e}">\n    <div class="mdc-button__ripple"></div>\n    <span class="mdc-button__label">Directions</span>\n  </a>\n  <button class="mdc-button mdc-card__action mdc-card__action--button">\n    <div class="mdc-button__ripple"></div>\n    <span class="mdc-button__label">More Information</span>\n  </button>\n</div>`;const r=s.querySelector("#card-body");n&&(r.innerHTML=`<h2 class="mdc-typography--body1">${n}</h2>`),a&&(r.innerHTML+=`<h2 class="mdc-typography--body2">${a}, ${o}</h2>`),s.querySelector(".mdc-card__primary-action").addEventListener("click",()=>{g(new google.maps.LatLng(t))}),d.appendChild(s)}),d.scrollTo(0,0)}(c),r.disabled=!1,l=!1})))}function g(e){s.setCenter(e),s.setZoom(19),s.setMapTypeId(t),s.setTilt(45),google.maps.event.addListenerOnce(s,"zoom_changed",()=>{s.getZoom()<19&&(s.setTilt(0),s.setMapTypeId(n))})}var p,u=window;for(p in e)u[p]=e[p];e.__esModule&&Object.defineProperty(u,"__esModule",{value:!0})})()</script><div id="iframe-contents"><div id="container"><div id="map"></div><div id="sidebar"><div id="search"><label class="mdc-text-field mdc-text-field--outlined"><input class="mdc-text-field__input"aria-labelledby="my-label-id"id="search-input"> <span class="mdc-notched-outline"><span class="mdc-notched-outline__leading"></span> <span class="mdc-notched-outline__notch"><span class="mdc-floating-label"id="my-label-id">Enter a location</span> </span><span class="mdc-notched-outline__trailing"></span></span></label> <button id="near-me"class="mdc-icon-button material-icons">near_me</button> <button id="refresh"class="mdc-icon-button material-icons">refresh</button></div><div id="cards"><div class="progress-wrapper"></div><style>.progress-wrapper{width:100%;height:100%;display:flex;align-items:center;justify-content:center}</style><script>var progress,progressDiv,progressWrapper=document.querySelector(".progress-wrapper");progressWrapper.innerHTML=`
<div class="mdc-circular-progress mdc-circular-progress--large" role="progressbar" aria-label="Example Progress Bar" aria-valuemin="0" aria-valuemax="1">
  <div class="mdc-circular-progress__determinate-container">
    <svg class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
      <circle class="mdc-circular-progress__determinate-circle" cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="113.097"/>
    </svg>
  </div>
  <div class="mdc-circular-progress__indeterminate-container">
    <div class="mdc-circular-progress__spinner-layer">
      <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
        <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549"/>
        </svg>
      </div><div class="mdc-circular-progress__gap-patch">
        <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549"/>
        </svg>
      </div><div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
        <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549"/>
        </svg>
      </div>
    </div>
  </div>
</div>
`,(progress=new mdc.circularProgress.MDCCircularProgress(document.querySelector(".mdc-circular-progress"))).open(),progress.determinate=!1,progress.done=function(){progress.close(),progressWrapper.remove()}</script></div></div></div><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&libraries=places,geometry&v=weekly&channel=1"async></script></div>