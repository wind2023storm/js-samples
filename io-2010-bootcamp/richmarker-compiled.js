function b(a){this.set("visible",true);a=a||{};this.h=a.map;this.setValues(a);this.get("shadow")||this.set("shadow","7px -3px 5px rgba(88, 88, 88, 0.7)")}b.prototype=new google.maps.OverlayView;window.RichMarker=b;b.prototype.m=function(){var a=this.get("map");if(a!==this.h){this.h=a;if(!a||a==null)this.onRemove();else{var c=this;window.setTimeout(function(){c.onRemove();c.onAdd()},0)}}};b.prototype.map_changed=b.prototype.m; b.prototype.k=function(){if(this.get("ready"))this.get("draggable")?h(this,this.a):i(this)};b.prototype.draggable_changed=b.prototype.k;b.prototype.getVisible=function(){return this.get("visible")};b.prototype.getVisible=b.prototype.getVisible;b.prototype.setVisible=function(a){this.set("visible",!!a)};b.prototype.setVisible=b.prototype.setVisible;b.prototype.q=function(){if(this.get("ready")){this.a.style.display=this.get("visible")?"":"none";this.draw()}};b.prototype.visible_changed=b.prototype.q; b.prototype.setFlat=function(a){this.set("flat",!!a)};b.prototype.setFlat=b.prototype.setFlat;b.prototype.getFlat=function(){return this.get("flat")};b.prototype.getFlat=b.prototype.getFlat;b.prototype.f=function(){if(this.get("ready"))this.a.style.boxShadow=this.get("flat")?this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow="":this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow=this.get("shadow")};b.prototype.flat_changed=b.prototype.f;b.prototype.setZIndex=function(a){this.set("zIndex",a)}; b.prototype.setZIndex=b.prototype.setZIndex;b.prototype.getZIndex=b.prototype.s;b.prototype.r=function(){if(this.get("zIndex")&&this.a)this.a.style.zIndex=this.get("zIndex")};b.prototype.zIndex_changed=b.prototype.r;b.prototype.getDraggable=function(){return this.get("draggable")};b.prototype.getDraggable=b.prototype.getDraggable;b.prototype.setDraggable=function(a){this.set("draggable",!!a)};b.prototype.setDraggable=b.prototype.setDraggable;b.prototype.getPosition=function(){return this.get("position")}; b.prototype.getPosition=b.prototype.getPosition;b.prototype.setPosition=function(a){this.set("position",a)};b.prototype.setPosition=b.prototype.setPosition;b.prototype.o=function(){this.draw()};b.prototype.position_changed=b.prototype.o;b.prototype.l=function(){return this.get("anchor")};b.prototype.getAnchor=b.prototype.l;b.prototype.p=function(a){this.set("anchor",a)};b.prototype.setAnchor=b.prototype.p;b.prototype.j=function(){this.draw()};b.prototype.anchor_changed=b.prototype.j; function j(a,c){var d=document.createElement("DIV");d.innerHTML=c;if(d.childNodes.length==1)return d.removeChild(d.firstChild);else{for(var e=document.createDocumentFragment();d.firstChild;)e.appendChild(d.firstChild);return e}}function k(a,c){if(c)for(var d;d=c.firstChild;)c.removeChild(d)}b.prototype.setContent=function(a){this.set("content",a);l(this);this.get("ready")&&this.draw()};b.prototype.setContent=b.prototype.setContent; b.prototype.getContent=function(){var a=this.get("content");if(typeof a=="string")return a;return this.get("content")};b.prototype.getContent=b.prototype.getContent; function l(a){if(a.b){k(a,a.b);var c=a.get("content");if(c){if(typeof c=="string"){c=c.replace(/^\s*([\S\s]*)\b\s*$/,"$1");c=j(a,c)}a.b.appendChild(c);c=a.b.getElementsByTagName("IMG");for(var d=0,e;e=c[d];d++){google.maps.event.addDomListener(e,"mousedown",function(g){a.get("draggable")&&g.preventDefault()});google.maps.event.addDomListener(e,"load",function(){a.draw()})}google.maps.event.trigger(a,"domready");a.draw()}}} function m(a,c){var d="default";if(navigator.userAgent.indexOf("Gecko/")!==-1){if(c=="dragging")d="-moz-grabbing";if(c=="dragready")d="-moz-grab"}else if(c=="dragging"||c=="dragready")d="move";if(c=="draggable")d="pointer";if(a.a.style.cursor!=d)a.a.style.cursor=d} function n(a,c){if(a.get("draggable"))if(!a.get("dragging")){a.set("dragging",true);a.g=a.get("map").get("draggable");a.get("map").set("draggable",false);var d=parseInt(a.a.style.left,10),e=parseInt(a.a.style.top,10),g=a.get("map").getDiv().offsetLeft,f=a.get("map").getDiv().offsetTop;a.d=c.clientX-g-d;a.e=c.clientY-f-e;m(a,"dragready");a.a.style.MozUserSelect="none";a.a.style.i="none";a.a.unselectable="on";a.a.n=function(){return false};google.maps.event.trigger(a,"dragstart")}} function o(a){if(a.get("draggable"))if(a.get("dragging")){a.set("dragging",false);a.get("map").set("draggable",a.g);a.d=null;a.e=null;a.g=null;var c=parseInt(a.a.style.left,10),d=parseInt(a.a.style.top,10);a.a.style.left=c+"px";a.a.style.top=d+"px";a.a.style.cursor="-moz-grab";a.a.style.MozUserSelect="";a.a.style.i="";a.a.unselectable="off";a.a.n=function(){};google.maps.event.trigger(a,"dragend");a.draw();m(a,"draggable")}} function i(a){if(a.c){for(var c=0,d;d=a.c[c];c++)google.maps.event.removeListener(d);a.c.length=0}m(a,"default")} function h(a,c){if(c){var d=a.get("map");a.c=[];a.c.push(google.maps.event.addDomListener(c,"mousedown",function(e){n(a,e)}),google.maps.event.addDomListener(c,"mouseup",function(){o(a)}),google.maps.event.addListener(d,"mousemove",function(e){if(!a.get("draggable")||!a.get("dragging"))o(a);else{var g=a.getProjection();a.get("map");a.get("map");var f=g.fromLatLngToContainerPixel(e.latLng);e=f.x-a.d-window.scrollX;f=f.y-a.e-window.scrollY;a.a.style.left=e+"px";a.a.style.top=f+"px";e=new google.maps.Point(e, f);a.set("position",g.fromDivPixelToLatLng(e));google.maps.event.trigger(a,"drag");m(a,"dragging")}}),google.maps.event.addDomListener(window,"mouseup",function(){o(a)}));m(a,"draggable")}} b.prototype.onAdd=function(){if(!this.a){this.a=document.createElement("DIV");this.a.style.position="absolute"}h(this,this.a);if(this.get("zIndex"))this.a.style.zIndex=this.get("zIndex");this.a.style.display=this.get("visible")?"":"none";if(!this.b){this.b=document.createElement("DIV");this.a.appendChild(this.b);var a=this;google.maps.event.addDomListener(this.b,"click",function(){google.maps.event.trigger(a,"click")})}this.set("ready",true);l(this);this.f();var c=this.getPanes();c&&c.overlayImage.appendChild(this.a)}; b.prototype.onAdd=b.prototype.onAdd; b.prototype.draw=function(){if(!(!this.get("ready")||this.get("dragging"))){var a=this.getProjection(),c=this.get("position");a=a.fromLatLngToDivPixel(c);this.a.style.top=a.y+"px";this.a.style.left=a.x+"px";a=this.get("anchor");if(typeof a=="object")a=a;else{c=new google.maps.Size(0,0);if(this.b){var d=this.b.offsetWidth,e=this.b.offsetHeight;switch(a){case p:break;case q:c.width=-d/2;break;case r:c.width=-d;break;case s:c.height=-e/2;break;case t:c.width=-d/2;c.height=-e/2;break;case u:c.width=-d; c.height=-e/2;break;case v:c.height=-e;break;case w:c.width=-d/2;c.height=-e;break;case x:c.width=-d;c.height=-e;break}}a=c}this.a.style.marginTop=a.height+"px";this.a.style.marginLeft=a.width+"px"}};b.prototype.draw=b.prototype.draw;b.prototype.onRemove=function(){this.a&&this.a.parentNode&&this.a.parentNode.removeChild(this.a);i(this)};b.prototype.onRemove=b.prototype.onRemove;var p=1,q=2,r=3,s=4,t=5,u=6,v=7,w=8,x=9; window.RichMarkerPosition={TOP_LEFT:p,TOP:q,TOP_RIGHT:r,LEFT:s,MIDDLE:t,RIGHT:u,BOTTOM_LEFT:v,BOTTOM:w,BOTTOM_RIGHT:x};
